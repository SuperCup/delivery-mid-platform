<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>创建项目流程</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="styles/project-process.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- 面包屑导航 -->
        <nav class="flex items-center space-x-2 text-sm text-gray-600 mb-4">
            <a href="../index.html" class="hover:text-blue-600 transition-colors">
                <i class="fas fa-home mr-1"></i>业务中台
            </a>
            <i class="fas fa-chevron-right text-gray-400"></i>
            <a href="project-process-management.html" class="hover:text-blue-600 transition-colors">项目流程管理</a>
            <i class="fas fa-chevron-right text-gray-400"></i>
            <span class="text-gray-800 font-medium">创建项目流程</span>
        </nav>
        
        <!-- 页面标题 -->
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-2xl font-bold text-gray-800">创建项目流程</h1>
            <div class="flex items-center space-x-3">
                <button class="btn-outline" onclick="saveDraft()">
                    <i class="fas fa-save"></i>
                    <span>保存草稿</span>
                </button>
                <button class="btn-secondary" onclick="previewProcess()">
                    <i class="fas fa-eye"></i>
                    <span>预览</span>
                </button>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <!-- 左侧步骤导航 -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg shadow-sm p-4 sticky top-4">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">创建步骤</h3>
                    <div class="space-y-2">
                        <div class="step-item active" data-step="1">
                            <div class="flex items-center">
                                <div class="step-number">1</div>
                                <span class="ml-3">基本信息</span>
                            </div>
                        </div>
                        <div class="step-item" data-step="2">
                            <div class="flex items-center">
                                <div class="step-number">2</div>
                                <span class="ml-3">选择模板</span>
                            </div>
                        </div>
                        <div class="step-item" data-step="3">
                            <div class="flex items-center">
                                <div class="step-number">3</div>
                                <span class="ml-3">配置流程</span>
                            </div>
                        </div>
                        <div class="step-item" data-step="4">
                            <div class="flex items-center">
                                <div class="step-number">4</div>
                                <span class="ml-3">团队配置</span>
                            </div>
                        </div>
                        <div class="step-item" data-step="5">
                            <div class="flex items-center">
                                <div class="step-number">5</div>
                                <span class="ml-3">确认创建</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 右侧内容区 -->
            <div class="lg:col-span-3">
                <!-- 步骤1：基本信息 -->
                <div id="step1" class="step-content bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">项目基本信息</h2>
                    <form id="basicInfoForm">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">项目名称 *</label>
                                <input type="text" id="projectName" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">项目编号</label>
                                <input type="text" id="projectCode" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="自动生成">
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">客户 *</label>
                                <select id="clientSelect" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option value="">请选择客户</option>
                                    <option value="达能">达能</option>
                                    <option value="笔巢">笔巢</option>
                                    <option value="嘉士伯">嘉士伯</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">项目类型 *</label>
                                <select id="projectType" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    <option value="">请选择项目类型</option>
                                    <option value="软件开发">软件开发</option>
                                    <option value="系统集成">系统集成</option>
                                    <option value="咨询服务">咨询服务</option>
                                    <option value="运维服务">运维服务</option>
                                    <option value="其他">其他</option>
                                </select>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">预计开始时间 *</label>
                                <input type="date" id="startDate" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">预计结束时间 *</label>
                                <input type="date" id="endDate" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            </div>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">项目描述</label>
                            <textarea id="projectDescription" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="请描述项目的目标、范围和主要内容..."></textarea>
                        </div>
                        <div class="flex justify-end">
                            <button type="button" class="btn-primary" onclick="nextStep(2)">
                                <span>下一步</span>
                                <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- 步骤2：选择模板 -->
                <div id="step2" class="step-content bg-white rounded-lg shadow-sm p-6 hidden">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">选择流程模板</h2>
                    <div class="mb-6">
                        <div class="flex items-center space-x-4 mb-4">
                            <label class="flex items-center">
                                <input type="radio" name="templateOption" value="preset" checked class="mr-2">
                                <span>使用预设模板</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="templateOption" value="custom" class="mr-2">
                                <span>自定义流程</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- 预设模板选择 -->
                    <div id="presetTemplates" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="template-card border-2 border-gray-200 rounded-lg p-4 cursor-pointer hover:border-blue-500 transition-colors" data-template="to-home">
                            <div class="flex items-center mb-3">
                                <i class="fas fa-home text-blue-500 text-xl mr-3"></i>
                                <h3 class="font-semibold text-gray-800">分到家流程</h3>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">适用于到家业务项目，包含需求分析、方案设计、系统开发、测试上线、运营支持等标准阶段</p>
                            <div class="text-xs text-gray-500">
                                <span class="bg-blue-100 px-2 py-1 rounded mr-1 mb-1 inline-block">需求分析</span>
                                <span class="bg-blue-100 px-2 py-1 rounded mr-1 mb-1 inline-block">方案设计</span>
                                <span class="bg-blue-100 px-2 py-1 rounded mr-1 mb-1 inline-block">系统开发</span>
                                <span class="bg-blue-100 px-2 py-1 rounded mr-1 mb-1 inline-block">测试上线</span>
                                <span class="bg-blue-100 px-2 py-1 rounded mr-1 mb-1 inline-block">运营支持</span>
                            </div>
                        </div>
                        
                        <div class="template-card border-2 border-gray-200 rounded-lg p-4 cursor-pointer hover:border-green-500 transition-colors" data-template="to-store">
                            <div class="flex items-center mb-3">
                                <i class="fas fa-store text-green-500 text-xl mr-3"></i>
                                <h3 class="font-semibold text-gray-800">到店流程</h3>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">适用于到店业务项目，包含商户调研、系统集成、门店部署、培训上线、维护优化等标准阶段</p>
                            <div class="text-xs text-gray-500">
                                <span class="bg-green-100 px-2 py-1 rounded mr-1 mb-1 inline-block">商户调研</span>
                                <span class="bg-green-100 px-2 py-1 rounded mr-1 mb-1 inline-block">系统集成</span>
                                <span class="bg-green-100 px-2 py-1 rounded mr-1 mb-1 inline-block">门店部署</span>
                                <span class="bg-green-100 px-2 py-1 rounded mr-1 mb-1 inline-block">培训上线</span>
                                <span class="bg-green-100 px-2 py-1 rounded mr-1 mb-1 inline-block">维护优化</span>
                            </div>
                        </div>
                        
                        <div class="template-card border-2 border-gray-200 rounded-lg p-4 cursor-pointer hover:border-purple-500 transition-colors" data-template="product-code">
                            <div class="flex items-center mb-3">
                                <i class="fas fa-qrcode text-purple-500 text-xl mr-3"></i>
                                <h3 class="font-semibold text-gray-800">物码流程</h3>
                            </div>
                            <p class="text-sm text-gray-600 mb-3">适用于物码业务项目，包含产品分析、码体设计、生产对接、质量检测、交付验收等标准阶段</p>
                            <div class="text-xs text-gray-500">
                                <span class="bg-purple-100 px-2 py-1 rounded mr-1 mb-1 inline-block">产品分析</span>
                                <span class="bg-purple-100 px-2 py-1 rounded mr-1 mb-1 inline-block">码体设计</span>
                                <span class="bg-purple-100 px-2 py-1 rounded mr-1 mb-1 inline-block">生产对接</span>
                                <span class="bg-purple-100 px-2 py-1 rounded mr-1 mb-1 inline-block">质量检测</span>
                                <span class="bg-purple-100 px-2 py-1 rounded mr-1 mb-1 inline-block">交付验收</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-between">
                        <button type="button" class="btn-outline" onclick="prevStep(1)">
                            <i class="fas fa-arrow-left mr-2"></i>
                            <span>上一步</span>
                        </button>
                        <button type="button" class="btn-primary" onclick="nextStep(3)">
                            <span>下一步</span>
                            <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>

                <!-- 步骤3：流程配置 -->
                <div id="step3" class="step-content bg-white rounded-lg shadow-sm p-6 hidden">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">配置流程阶段</h2>
                    
                    <div class="mb-6">
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                            <div class="flex items-center">
                                <i class="fas fa-info-circle text-blue-500 mr-2"></i>
                                <span class="text-blue-700 font-medium">根据选择的模板自动生成流程阶段，请为每个阶段分配负责人和调整工期</span>
                            </div>
                        </div>
                        
                        <div id="processStages" class="space-y-4">
                            <!-- 流程阶段将通过JavaScript动态生成 -->
                        </div>
                    </div>
                    
                    <div class="flex justify-between">
                        <button type="button" class="btn-outline" onclick="prevStep(2)">
                            <i class="fas fa-arrow-left mr-2"></i>
                            <span>上一步</span>
                        </button>
                        <button type="button" class="btn-primary" onclick="nextStep(4)">
                            <span>下一步</span>
                            <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>

                <!-- 步骤4：团队配置 -->
                <div id="step4" class="step-content bg-white rounded-lg shadow-sm p-6 hidden">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">选择团队成员</h2>
                    
                    <div class="mb-6">
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                            <div class="flex items-center">
                                <i class="fas fa-users text-green-500 mr-2"></i>
                                <span class="text-green-700 font-medium">从可用成员中选择项目团队成员，支持多选</span>
                            </div>
                        </div>
                        
                        <div id="teamMembers" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <!-- 团队成员将通过JavaScript动态生成 -->
                        </div>
                    </div>
                    
                    <div class="flex justify-between">
                        <button type="button" class="btn-outline" onclick="prevStep(3)">
                            <i class="fas fa-arrow-left mr-2"></i>
                            <span>上一步</span>
                        </button>
                        <button type="button" class="btn-primary" onclick="nextStep(5)">
                            <span>下一步</span>
                            <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>

                <!-- 步骤5：确认创建 -->
                <div id="step5" class="step-content bg-white rounded-lg shadow-sm p-6 hidden">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">确认创建项目</h2>
                    
                    <div class="bg-gray-50 rounded-lg p-6 mb-6">
                        <h3 class="text-lg font-medium text-gray-800 mb-4">项目信息预览</h3>
                        <div id="projectSummary">
                            <!-- 项目信息预览将通过JavaScript动态生成 -->
                        </div>
                    </div>
                    
                    <div class="flex justify-between">
                        <button type="button" class="btn-outline" onclick="prevStep(4)">
                            <i class="fas fa-arrow-left mr-2"></i>
                            <span>上一步</span>
                        </button>
                        <button type="button" class="btn-primary" onclick="createProject()">
                            <i class="fas fa-check"></i>
                            <span>创建项目</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="scripts/project-process-create.js"></script>
</body>
</html>